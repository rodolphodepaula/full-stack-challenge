<div class="container mt-5">
  <!-- Cabeçalho-->
  <div class="row">
    <div class="mb-4 col-12">
      <h1 class="text-center display-4">Descubra Músicas pelo ISRC</h1>
      <p class="text-center lead">O ISRC (International Standard Recording Code) é o identificador global padrão para
        músicas e videoclipes.</p>
    </div>
  </div>
  <div class="mb-4 row justify-content-center">
    <div class="col-md-8">
      <div class="mb-4 search-bar">
        <form (ngSubmit)="onSearch()">
          <div class="input-group input-group-lg">
            <input type="text" [(ngModel)]="isrcCode" name="isrc" class="form-control"
              placeholder="Busque pela faixa de música inserindo o código ISRC aqui!" required>
            <div class="input-group-append">
              <button type="submit" class="btn btn-dark">
                <i class="bi bi-search"></i> Consultar
              </button>
            </div>
          </div>
        </form>
      </div>
      <!-- Botões de navegação -->
      <div *ngIf="tracks.length" class="mb-4 d-flex justify-content-between align-items-center">
        <button class="btn btn-outline-dark" (click)="onPrevious()"
          [disabled]="currentTrackIndex === 0">Anterior</button>
        <span class="px-3 py-2 bg-transparent badge fs-6">
          Registro {{ currentTrackIndex + 1 }} de {{ tracks.length }}
        </span>
        <button class="btn btn-outline-dark" (click)="onNext()"
          [disabled]="currentTrackIndex === tracks.length - 1">Próximo</button>
      </div>


      <!-- Resultado da busca -->
      <div *ngIf="track" class="mb-3 card card-custom">
        <div class="row g-0">
          <div class="col-md-4">
            <img [src]="track.album_thumb" class="img-fluid rounded-start" alt="Album Cover">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">{{ track.track_title }}</h5>
              <p class="card-text">
                <small class="text-muted">Lançamento: {{ track.release_date }}</small>
              </p>
              <p class="card-text">Artistas: <span *ngFor="let artist of track.artists; let i = index">
                  {{ artist }}<span *ngIf="i < track.artists.length - 1">, </span>
                </span></p>
              <p class="card-text">Duração: {{ track.duration }}</p>
              <p class="card-text" *ngIf="track.available_in_br">
                Disponível no Brasil
              </p>
              <p class="card-text" *ngIf="!track.available_in_br">
                Não disponível no Brasil
              </p>
              <audio *ngIf="track.preview_url" controls>
                <source [src]="track.preview_url" type="audio/mpeg">
                Seu navegador não suporta áudio HTML5.
              </audio>
              <div class="mt-3 d-flex justify-content-between align-items-center">
                <a *ngIf="track.spotify_url" href="{{ track.spotify_url }}" class="btn btn-primary" target="_blank">
                  Ouça no Spotify
                </a>
                <button type="button" class="btn btn-success" (click)="addToLibrary(track)">
                  Adicione à sua Biblioteca!
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Mensagem de erro -->
      <div *ngIf="errorMessage" class="alert alert-secondary">
        {{ errorMessage }}
      </div>
    </div>
  </div>
</div>
